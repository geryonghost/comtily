<%
if (locals.entries != "" && locals.entries != undefined) {
  entries = locals.entries
}
%>

<%- include('inc/header.ejs') %>

  <div class="row">
    <div class="col">
      <div class="card">
        <div class="card-body">
          <form action="/addentry" method="post">
          Date: <input type="date" name="date" required><br />
          Rating: 
          1 <input type="radio" name="rating" value="1" required/>
          2 <input type="radio" name="rating" value="2" />
          3 <input type="radio" name="rating" value="3" />
          4 <input type="radio" name="rating" value="4" />
          5 <input type="radio" name="rating" value="5" /><br />
          Zip Code: <input type="text" name="zipcode" inputmode="numeric" required /><br /><br />
          <input class="btn btn-primary" type="submit" value="Submit">
        </form>
        </div>
      </div>
    </div>
  </div>

  <% if (entries.length > 0) { %>
  <br />
  <div class="row">
    <div class="col">
      <div class="card-body">
        <table class="table table-primary">
          <thead>
            <tr>
              <td>Date</td>
              <td>Day</td>
              <td>Moon Phase</td>
              <td>Pressure</td>
              <td>Rating</td>
              <!-- <td>Team</td> -->
            </tr>
          </thead>
          <tbody>
            <% entries.forEach((entry) => { %>
            <tr class="table-info">
              <td><%=entry.date %></td>
              <td><%=entry.cycles.day %></td>
              <td><%=entry.cycles.moon_phase%> <%-entry.cycles.lunarEmoji%></td>
              <td><%=entry.pressure_in[11]%> in</td>
              <td><%=entry.rating%></td>
              <!-- <td><%=entry.team%></td> -->
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <% } %>

<%- include('inc/footer.ejs') %>
